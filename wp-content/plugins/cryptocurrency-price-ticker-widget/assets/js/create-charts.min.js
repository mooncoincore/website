!function($){$.fn.gernateChart=function(){var coinId=$(this).data("coin-id"),mainThis=$(this),coinperiod=$(this).data("coin-period"),fromLbl=$(this).data("from-lbl"),toLbl=$(this).data("to-lbl"),zoomLbl=$(this).data("zoom-lbl"),priceLbl=$(this).data("price-lbl"),currentPrice=$(this).parents(".ccpw-container.chart").find(".CCP-"+coinId).text(),rest_url=$(this).parents(".ccpw-container.chart").find(".coin_details").attr("data-rest-url"),currentVol=$(this).parents(".ccpw-container.chart").children(".CCMC").text(),volumeLbl=$(this).data("volume-lbl"),color=$(this).data("chart-color"),price_section=$(this).find(".CCP-"+coinId),priceData=[],milliseconds=(new Date).getTime();if(currentPrice<.5)var formatedPrice=numeral(currentPrice).format("00.000000");else var formatedPrice=numeral(currentPrice).format("00.00");var currentPriceIndex={date:milliseconds,value:formatedPrice.replace("$",""),volume:numeral(currentVol).format("00.00")};$(this).find(".CCMC,.CCV").number(!0);var cacheIndex=coinId+"-historical-data",coinCacheData=lscache.get(cacheIndex);coinCacheData?generateChart(coinId,color,priceData=coinCacheData,fromLbl,toLbl,zoomLbl,priceLbl,volumeLbl):jQuery.ajax({type:"get",dataType:"json",url:rest_url,data:{coin_id:coinId},async:!0,success:function(response){if("success"==response.status)if(response.data&&null!=response.data){var priceData=response.data,lastIndex=priceData[priceData.length-1];currentPriceIndex.volume=lastIndex.volume,priceData.push(currentPriceIndex),mainThis.find("#cmc-chart-preloader").hide(),lscache.set(coinId+"-historical-data",priceData,120),generateChart(coinId,color,priceData,fromLbl,toLbl,zoomLbl,priceLbl,volumeLbl)}else mainThis.find("#cmc-no-data").show(),mainThis.css("height","auto"),console.log("No data available!")}})};var generateChart=function(coinId,color,priceData,fromLbl,toLbl,zoomLbl,priceLbl,volumeLbl){if(""!=priceData.price){$.each(priceData,function(index,data){var value;return parseFloat(data.value)<.5?value=parseFloat(numeral(data.value).format("00.000000")):parseFloat(data.value)>=.51&&(value=parseFloat(numeral(data.value).format("00.00"))),priceData[index]={date:data.date,value:value,volume:data.volume},priceData});var chart=AmCharts.makeChart("CCPW-CHART-"+coinId,{type:"stock",theme:"light",hideCredits:!0,categoryAxesSettings:{minPeriod:"mm"},dataSets:[{title:"USD",color:color,fieldMappings:[{fromField:"value",toField:"value"},{fromField:"volume",toField:"volume"}],dataProvider:priceData,categoryField:"date"}],panels:[{showCategoryAxis:!0,title:priceLbl,percentHeight:70,stockGraphs:[{id:"g1",valueField:"value",type:"smoothedLine",lineThickness:2,bullet:"round",comparable:!0,compareField:"value",balloonText:"[[title]]:<b>[[value]]</b>",compareGraphBalloonText:"[[title]]:<b>[[value]]</b>"}],stockLegend:{periodValueTextComparing:"[[percents.value.close]]%",periodValueTextRegular:"[[value.close]]"},allLabels:[{x:200,y:115,text:"",align:"center",size:16}],drawingIconsEnabled:!1},{title:volumeLbl,percentHeight:30,stockGraphs:[{valueField:"volume",type:"column",showBalloon:!1,cornerRadiusTop:2,fillAlphas:1}],stockLegend:{periodValueTextRegular:"[[value.close]]"}}],chartScrollbarSettings:{graph:"g1",usePeriod:"10mm",position:"bottom"},chartCursorSettings:{valueBalloonsEnabled:!0,fullWidth:!0,cursorAlpha:.1,valueLineBalloonEnabled:!0,valueLineEnabled:!0,valueLineAlpha:.5},periodSelector:{position:"top",periodsText:zoomLbl,fromText:fromLbl,toText:toLbl,periods:[{period:"DD",count:1,label:"1D"},{period:"DD",count:7,label:"7D"},{period:"MM",count:1,selected:!0,label:"1M"},{period:"MM",count:3,label:"3M"},{period:"MM",count:6,label:"6M"},{period:"MAX",label:"1Y"}]},export:{enabled:!1,position:"top-right"}})}};$(".ccpw-chart").each(function(index){$(this).gernateChart()})}(jQuery);